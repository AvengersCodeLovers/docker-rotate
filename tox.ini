[tox]
envlist = py27,lint

[testenv]
commands =
    python setup.py sdist
    py.test tests {posargs}
deps =
    setuptools>=17.1
    pytest
    mock

[testenv:lint]
commands =
    flake8 --max-line-length 99 dockerrotate
basepython = python2.7
deps =
    flake8

# These are the integration tests. They make changes to your Docker environment, possibly permanent.
# They are not included in the default environment list. To run them, run: 
# "tox -e integration_test".
[testenv:integration_test]
deps =
    pytest
    docker-py{env:DOCKER_PY_VERSION:>=1.6.0}
basepython = python2.7
changedir = integration_test
commands =
    pip freeze
    py.test -v {posargs}
setenv = 
   DOCKER_HOST={env:DOCKER_HOST:}
   DOCKER_CERT_PATH={env:DOCKER_CERT_PATH:}
   DOCKER_TLS_VERIFY={env:DOCKER_TLS_VERIFY:}
